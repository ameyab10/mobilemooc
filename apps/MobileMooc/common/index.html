<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title>index</title>
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
<link rel="shortcut icon" href="images/favicon.png">
<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
<link rel="stylesheet" href="css/main.css">
<link rel="stylesheet" href="css/jquery.mobile-1.4.2.css" />
<script src="js/jquery-1.11.0.js"></script>
<script src="js/jquery.mobile-1.4.2.js"></script>

</head>
<body>
	<div data-role="page" id="home">
		<!-- id="home" data-theme="c" -->
		<div data-role="header">
			<h1>Course List</h1>
		</div>
		<div data-role="content">
			<ul id="coursesList" data-role="listview" data-filter="true"
				data-filter-placeholder="Search Courses..." data-inset="true">
				</ul>
		</div>
		<div data-role="footer"></div>
		<script>
			$(document).ready(function() {
				$.ajax({

					type : "POST",
					url : "http://mobile-mooc.herokuapp.com/api/courses",
					dataType : "jsonp",
					// work with the response
					success : function(response) {
						console.log(response);
						alert('success');
						onRetrieve(response);
					},
					error : function(response) {
						console.log(response);
						alert('error');
						onRetrieve(response);
					}
				});
			});
		</script>
		<script>
			function onRetrieve(coursePaylod) {
			
			var courseLinks;
			
			    			alert("On Retrieve caled "+coursePaylod);
			    			$.each(coursePaylod, function(index, value){
						courseLinks[index] = "<a href='' data-id='"+value["id"]+"'><img src='images/icon.png' width='40px' height='40px'></img>"+ value["title"] +"</a>"
					});
			
				var courseList = courseLinks;;
				for (var i = 0; i < courseList.length; i++) {
					$("<li/>").appendTo("#coursesList").html(courseList[i]);
					$("#coursesList").listview('refresh');
				}
			}
		</script>

	</div>
	<!-- /page -->
	<div data-role="page" id="page2">
		<div data-role="header">
			<h1>Page 2 Welcomes you</h1>
		</div>
	</div>
	<!--End of page 2  -->
</body>
</html>