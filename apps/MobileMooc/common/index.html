<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title>index</title>
<meta name="viewport"
	content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0">
<link rel="shortcut icon" href="images/favicon.png">
<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
<link rel="stylesheet" href="css/main.css">
<link rel="stylesheet" href="css/jquery.mobile-1.4.2.css" />
<script src="js/jquery-1.11.0.js"></script>
<script src="js/jquery.mobile-1.4.2.js"></script>

</head>
<body>
	<div data-role="page" id="home">
		<!-- id="home" data-theme="c" -->
		<div data-role="header">
			<h1>Course List</h1>
		</div>
		<div data-role="content">
			<ul id="coursesList" data-role="listview" data-filter="true"
				data-filter-placeholder="Search Courses..." data-inset="true">
				<li id="listitem"><a href="#courseDetails"
					onclick="getCourseDetails()" id="item">Item</a></li>
			</ul>
		</div>
		<div data-role="footer"></div>
		<script src="js/initOptions.js"></script>
		<script src="js/main.js"></script>
		<script src="js/messages.js"></script>
		<script>
			$(document).ready(function() {
				$.ajax({

					type : "GET",
					url : "http://mobile-mooc.herokuapp.com/api/courses",
					dataType : "json",
					// work with the response
					success : function(response) {
						console.log(response);
					//	alert('success');
						onRetrieve(response);
					},
					error : function(response) {
						console.log(response);
						alert('error');
					//	onRetrieve(response);
					}
				});
			});
		</script>

		<script>
			function onRetrieve(coursePaylod) {
			
			coursePaylod[0].title;
		//	$("#listitem").append("<li id=listitem2><a href="" >"+coursePaylod[0].title+"</a></li>");
		//			$("#coursesList").listview('refresh');
			$("#listitem").append("<li id=listitem3><a href="" id='item3'>Test</a></li>");
			$("#coursesList").listview('refresh');
	/* 					var courseLinks;
			    			$.each(coursePaylod, function(index, value){
						courseLinks[index] = "<a href='' data-id='"+value["id"]+"'><img src='images/icon.png' width='40px' height='40px'></img>"+ value["title"] +"</a>"
					});
			
				var courseList = courseLinks;;
				for (var i = 0; i < courseList.length; i++) {
					$("<li/>").appendTo("#coursesList").html(courseList[i]);
					$("#coursesList").listview('refresh');
				}
			} */
		</script>

	</div>
	<!-- /page -->


	<div data-role="page" id="courseDetails">
		<div data-role="header">
			<h1>Course Details</h1>
		</div>




		<div data-role="content" id="pageContent">
			<label id="courseTitle" style="text-align: center">Raising
				Money for Startups <a id="courseLink"
				href="https://www.udemy.com/raising-capital-for-startups/"></a>
			</label> <img id="courseImage" style="width: 100%" height="200"
				src="https://udemyimages-a.akamaihd.net/course/200_H/anonymous_v2.jpg" />

			<label id="courseDescription"
				style="font-family: Apple LiSung; background-color: silver;">7
				top founders and CEOs explain how to raise money for your startup!</label>
		</div>


		<div data-role="content" id="pageContent0">

			<img id="profImage" height="80" width="80"
				src="https://udemyimages-a.akamaihd.net/user/100x100/anonymous.jpg" />
			<div class="ui-grid-a">
				<div class="ui-block-a" style="test-align: top">Professor:</div>
				<div class="ui-block-b" id="profName">Dave McClure</div>
			</div>
			<div class="ui-grid-a">
				<div class="ui-block-a">No of Lectures</div>
				<div class="ui-block-b" id="lectureNo">10</div>
			</div>
			<div class="ui-grid-a">
				<div class="ui-block-a">No of Subscribers</div>
				<div class="ui-block-b" id="subscriberNo">Dave McClure</div>
			</div>
			<div>
				<ul id="contentList" data-role="listview" data-filter="true"
				data-filter-placeholder="Search Content" data-inset="true">
					<li id="contentTitle"><a href="" id="item0">Item</a></li><li
						id="contentDescription"><a href="" id="item1">Item</a></li>
				</ul>
			</div>

			<video style="padding-top:20px" width="auto" height="200" controls>
				<source id="courseVideo"
					src="https://sknowbucket-a.akamaihd.net/2010-11-23_02-06-27-9e4db5fbf0f9bd8b915f1851bdafe4c2/WebHD.mp4?__gda__=1398338107_eba2fcbe275db7beb71677b9802bac20&filedownload=attachment%3Bfilename%3Ddeveloper-dashboard.wmv"
					type="video/mp4">
 					 Your browser does not support the video tag.			</source>
			</video>

			<div data-role="navbar" id="navbar">
				<ul>
					<li><a href="#" id="home">Home</a></li>
					<li><a href="#" id="Drop">Drop</a></li>
					<li><a href="#" id="Add" onclick="getCourseDetails()">Add
					</a></li>
				</ul>
			</div>


		</div>


		<script src="js/initOptions.js"></script>
		<script src="js/main.js"></script>
		<script src="js/messages.js"></script>
		<script>
		function getCourseDetails(){
						$.ajax({

					type : "GET",
					//url : "http://mobile-mooc.herokuapp.com/api/courses/5358b72c75be840200ed5c77",
					url : "http://mobile-mooc.herokuapp.com/api/courses/5358b52375be840200ed5c76",
					dataType : "json",
					// work with the response
					success : function(response) {
						console.log(response);
					//	alert('success');
						populateCourseData(response);
					},
					error : function(response) {
						console.log(response);
						alert('error');
					//	onRetrieve(response);
					}
				});
		
		}
		
		function populateCourseData(courseData){
		
			$('#courseTitle').text(courseData.title);
			$('#courseDescription').text(courseData.headline);
			$('#courseImage').attr("src", courseData.images.img_200_H);
			$('#courseLink').text(courseData.url);
			$('#profName').text(courseData.owner.title);
			$('#profImage').attr("src", courseData.owner.images.img_100x100);
			$('#lectureNo').text(courseData.numLectures);
			$('#subscriberNo').text(courseData.numSubscribers);
			$('#contentTitle').text(courseData.promoAsset.title);
			$('#contentDescription').text(courseData.promoAsset.description);
			$('#courseVideo').attr("src", courseData.promoAsset.streamUrl);
		}
		
		</script>



	</div>
	<!--End of page 2  -->
</body>
</html>